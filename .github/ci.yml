name: Build and Test
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
jobs:
    build:
        runs-on: ubuntu-latest

        steps:
        - uses: actions/checkout@v4
        - name: Setup .NET
            uses: actions/setup-dotnet@v4
            with:
                dotnet-version: 9.0.x

        - name: Restore Dependencies
          run: dotnet restore

        - name: Check Formatting
            run: dotnet format --verify-no-changes --verbosity diagnostic

        - name: Build
            run: dotnet build --no-restore --configuration Release
        - name: Run Tests
            run: dotnet test --no-restore --verbosity normal --configuration Release
        - name: Publish
            run: dotnet publish --no-restore --configuration Release -o ./publish
